<section class="all_sec">
    <div class="flex justify-between items-center">
        <h4 class="font-bold text-[2.5rem]">التسكين</h4>
        <div class="flex gap-3">
            <button class="shared_btn_style secondry_btn" title="إضافة حجز" (click)="go_to_organize_taskeen()">
                توزيع الغرف
                <span><i class="fa-solid fa-bed"></i></span>
            </button>
            <button (click)="exportDataToExcelStyled()" class="shared_btn_style thirdry_btn" title="تصدير">
                تصدير
                <span><i class="fa-solid fa-arrow-up-from-bracket"></i></span>
            </button>
        </div>
    </div>

    <div class="all_table relative overflow-x-auto">

        <form class="w-full  px-6 mb-10" [formGroup]="searchForm" (ngSubmit)="search_reservations()">
            <!-- <label for="default-search" class="mb-2 text-sm font-medium text-gray-900 sr-only">ابحث هنا ....</label> -->
            <div class="relative  w-full flex gap-4 items-center">
                <!-- <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                    <svg class="w-4 h-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 20 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                    </svg>
                </div> -->
                <!-- <input type="search" id="default-search" formControlName="hotel_Id"
                    class="crud_input block w-full p-4 ps-10" placeholder="ابحث برقم الحجز ...." /> -->
                <select formControlName="hotel_Id" class="crud_input block w-full p-4 ps-10"
                    placeholder="ابحث برقم الحجز ....">
                    <option value="">اختر الفندق</option>
                    @for(hotel of all_hotels ; track $index) {
                    <option value="{{hotel.id}}">{{hotel.name}}</option>
                    }
                </select>
                <input type="date" id="default-search" formControlName="fromDate"
                    class="crud_input block w-full p-4 ps-10" placeholder="ابحث من تاريخ ...." />
                <input type="date" id="default-search" formControlName="toDate"
                    class="crud_input block w-full p-4 ps-10" placeholder="ابحث إلى تاريخ ...." />
                <div class="flex gap-2 items-center ps-3">
                    <button type="submit" class="text-white  px-3 py-2 thirdry_bg rounded-xl">بحث</button>
                    @if(search_value){
                    <button type="button" (click)="cancel_search()"
                        class="text-white  px-3 py-2 main_bg rounded-xl">الغاء</button>
                    }
                </div>
            </div>
            @if(search_value){
            <div class="flex justify-center pt-1 text-gray-600 text-sm ">
                عرض نتائج البحث عن : {{hotel_name}} ({{fromDate}} - {{toDate}})
            </div>
            }
        </form>
        @if(all_taskeen.length > 0){
        <table class="w-full  text-sm text-left rtl:text-right">
            <thead class="crud_head_titles border">
                <tr>
                    <th scope="col" class="ps-4 py-3">
                        #
                    </th>
                    @for(title of table_head_titles ; track $index) {
                    <th scope="col" class="px-4 py-3">
                        {{title}}
                    </th>
                    }
                </tr>
            </thead>
            <tbody class="border">
                @for(one_taskeen of all_taskeen ; track $index) {
                <tr class="crud_body_data border">
                    <td class="ps-4 py-4">
                        ({{$index+1}})
                    </td>
                    <td class="px-4 min-w-[100px] py-4">
                        {{ one_taskeen.clientName }}
                    </td>
                    <td class="px-4 min-w-[100px] py-4">
                        {{ one_taskeen.invoiceNumber }}
                    </td>
                    <td class="px-4 py-4">
                        @if(one_taskeen.fromDate){
                        <span class="crud_body_secondry_color inline-block ">
                            {{one_taskeen.fromDate | date}} </span>
                        }
                        @if(one_taskeen.toDate){
                        <span> <i class=" px-3 fa-solid fa-caret-left"></i> </span>
                        <span> {{one_taskeen.toDate | date }} </span>
                        }
                    </td>
                    <td class="px-4 min-w-[70px] py-4 text-center">
                        {{ one_taskeen.totalCount}}
                    </td>
                    <td class="px-4 min-w-[70px] py-4 text-center">
                        {{ one_taskeen.menCount || '-' }}
                    </td>
                    <td class="px-4 min-w-[70px] py-4 text-center">
                        {{ one_taskeen.womenCount || '-' }}
                    </td>
                    <td class="px-4 py-4">
                        {{one_taskeen.stayType | enum : 'stayType'}}
                    </td>

                    <td class="px-4 py-4">
                        @if(one_taskeen.reservedRooms.length > 0){
                        {{one_taskeen.num_of_all_rooms}} غرفة
                        <!-- <span class="text-[10px]">
                            {{one_taskeen.bedsCountInRoom}} س
                        </span> -->
                        }@else{
                        -
                        }
                    </td>
                    <td class="px-4 py-4">
                        @if(one_taskeen.reservedRooms.length == 0){
                        {{one_taskeen.numOfSingleBeds+ 'سرير'|| '-'}}
                        }@else{
                        @for(room of one_taskeen.reservedRooms ; track $index ; let last = $last){
                        {{room.roomsCount}} {{room.type | enum : 'room_types_short'}} {{$last ? '' : ' |'}}
                        }
                        }
                    </td>
                    <!-- <td class="px-4 py-4 flex items-center gap-4"> -->
                    <!-- <span class="crud_icon show_icon_color"><i class="fa-regular fa-pen-to-square"></i></span> -->
                    <!-- <span class="crud_icon edit_icon_color" [routerLink]="['/show-Reservation', one_taskeen.id]"><i
                                class="fa-regular fa-eye"></i></span> -->
                    <!-- <span (click)="show_delete_alert(reservation.id)" title="حذف"
                            class="crud_icon delete_icon_color"><i class="fa-solid fa-trash"></i></span> -->
                    <!-- </td> -->
                </tr>
                }
            </tbody>
        </table>
        }
        @else {
        <div class="no_reservations text-2xl text-gray-600">لا يوجد تسكينات</div>
        }
    </div>
</section>